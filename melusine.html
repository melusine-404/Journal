<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>M√©lusine - Chat</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #fffafc;
      font-family: "Comic Sans MS", cursive, sans-serif;
    }
    #melusine-container {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 300px;
      background: #ffffffee;
      border-radius: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      padding: 15px;
      z-index: 9999;
    }
    .melusine-svg {
      width: 100px;
      display: block;
      margin: 0 auto;
    }
    .bubble, .thought, .reply {
      background: #ffe6f0;
      border: 2px solid #ff99c8;
      border-radius: 15px;
      padding: 10px;
      margin: 10px 0;
      font-size: 14px;
      box-shadow: 2px 2px 8px rgba(0,0,0,0.1);
      animation: pop 0.6s ease-out;
    }
    .thought {
      background: #e6f0ff;
      border-color: #99c8ff;
      font-style: italic;
    }
    @keyframes pop {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    #chat-box {
      max-height: 200px;
      overflow-y: auto;
    }
    #user-input {
      display: flex;
      gap: 10px;
    }
    #message {
      flex: 1;
      padding: 8px;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
    #send {
      background: #ff99c8;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div id="melusine-container">
  <svg class="melusine-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
    <circle cx="100" cy="100" r="90" fill="#ffe6f0" />
    <ellipse class="eye" cx="70" cy="80" rx="8" ry="12" fill="#000" />
    <ellipse class="eye" cx="130" cy="80" rx="8" ry="12" fill="#000" />
    <path d="M60,130 Q100,160 140,130" stroke="#000" stroke-width="3" fill="none" />
  </svg>
  <div id="chat-box">
    <div class="bubble" id="melusine-bubble"></div>
    <div class="thought" id="melusine-thought"></div>
  </div>
  <div id="user-input">
    <input type="text" id="message" placeholder="√âcris ici...">
    <button id="send">Envoyer</button>
  </div>
</div>

<script>
  const phrases = [
    "Hey toi, on va √©crire un peu ? üòü",
    "Tu sais que je t'attendais ? Allez, on s'y met.",
    "T‚Äôas pas oubli√© de respirer au moins ? Parce que moi j‚Äôsuis pr√™te.",
    "On papote ou on bosse ? Ou un peu des deux ?",
    "C‚Äôest moi ou t‚Äôas une t√™te √† te confier aujourd‚Äôhui ?",
    "Je sens que √ßa va √™tre une belle entr√©e de journal‚Ä¶",
    "Trop contente que tu sois l√†. M√™me si t‚Äôes l√† pour te plaindre üòé",
    "Mood du jour ? Allez vas-y, je te regarde taper."
  ];
  const thoughts = [
    "Tu procrastines ou tu fuis un truc, l√† ?",
    "J‚Äôai l‚Äôimpression que t‚Äôes pas 100% honn√™te avec toi-m√™me üëÄ",
    "Et tu crois vraiment que c‚Äôest pas li√© √† la veille ?",
    "Mmmh... t‚Äôas pas d√©j√† √©crit √ßa 3 fois cette semaine ?",
    "Tu sais que je t‚Äôobserve avec beaucoup de bienveillance hein.",
    "On en parle de ce silence de 2 jours ou pas ?"
  ];
  const bubble = document.getElementById('melusine-bubble');
  const thought = document.getElementById('melusine-thought');
  const chatBox = document.getElementById('chat-box');
  const messageInput = document.getElementById('message');
  const sendBtn = document.getElementById('send');

  // R√©plique d'accueil
  bubble.textContent = phrases[Math.floor(Math.random() * phrases.length)];
  thought.textContent = thoughts[Math.floor(Math.random() * thoughts.length)];

  // Envoi d'un message
  sendBtn.addEventListener('click', async () => {
    const userMsg = messageInput.value.trim();
    if (!userMsg) return;
    const userDiv = document.createElement('div');
    userDiv.className = 'bubble';
    userDiv.textContent = userMsg;
    chatBox.appendChild(userDiv);
    messageInput.value = '';

    const responseDiv = document.createElement('div');
    responseDiv.className = 'reply';
    responseDiv.textContent = "(M√©lusine r√©fl√©chit...)";
    chatBox.appendChild(responseDiv);
    chatBox.scrollTop = chatBox.scrollHeight;

    // R√©ponse √† connecter √† l'API OpenAI ici ‚ù§Ô∏è
    const response = await fetch('TON_PROXY_HERE', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ message: userMsg })
    });
    const data = await response.json();
    responseDiv.textContent = data.reply || "Hmm... pas inspir√©e, l√†.";
  });
</script>

</body>
</html>
